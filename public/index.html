<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Wine Cellar</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@400;600&family=DM+Sans:wght@400;500;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/css/styles.css">
</head>
<body>
  <header>
    <h1>Wine Cellar</h1>
    <div class="stats" id="stats">
      <div class="stat">
        <div class="stat-value" id="stat-total">-</div>
        <div class="stat-label">Bottles</div>
      </div>
      <div class="stat">
        <div class="stat-value" id="stat-reduce">-</div>
        <div class="stat-label">Reduce Now</div>
      </div>
      <div class="stat">
        <div class="stat-value" id="stat-empty">-</div>
        <div class="stat-label">Empty Slots</div>
      </div>
    </div>
  </header>

  <nav class="tabs">
    <div class="tab active" data-view="grid">Cellar Grid</div>
    <div class="tab" data-view="reduce">Reduce Now</div>
    <div class="tab" data-view="wines">All Wines</div>
    <div class="tab" data-view="pairing">Find Pairing</div>
  </nav>

  <!-- Grid View -->
  <div class="view active" id="view-grid">
    <div class="fridge-section zone">
      <div class="zone-header">
        <span class="zone-title">Fridge</span>
      </div>
      <div class="fridge-grid" id="fridge-grid"></div>
    </div>

    <div class="zone">
      <div class="zone-header">
        <span class="zone-title">Cellar</span>
      </div>
      <div class="cellar-grid" id="cellar-grid"></div>
    </div>
  </div>

  <!-- Reduce Now View -->
  <div class="view" id="view-reduce">
    <h2 style="margin-bottom: 1rem;">Drink These Next</h2>
    <div class="reduce-list" id="reduce-list"></div>
  </div>

  <!-- All Wines View -->
  <div class="view" id="view-wines">
    <h2 style="margin-bottom: 1rem;">All Wines</h2>
    <div class="wine-list" id="wine-list"></div>
  </div>

  <!-- Pairing View -->
  <div class="view" id="view-pairing">
    <!-- Sommelier section -->
    <div class="natural-pairing">
      <h2 style="margin-bottom: 1rem;">Ask the Sommelier</h2>
      <input type="text" id="dish-input" placeholder="Describe your dish... e.g., 'grilled salmon with lemon butter'" />
      <div class="pairing-filters">
        <div class="filter-group">
          <span class="filter-label">Source:</span>
          <label><input type="radio" name="source" value="all" checked> All wines</label>
          <label><input type="radio" name="source" value="reduce_now"> Reduce-now only</label>
        </div>
        <div class="filter-group">
          <span class="filter-label">Colour:</span>
          <label><input type="radio" name="colour" value="any" checked> Any</label>
          <label><input type="radio" name="colour" value="red"> Red</label>
          <label><input type="radio" name="colour" value="white"> White</label>
          <label><input type="radio" name="colour" value="rose"> Rose</label>
        </div>
      </div>
      <button class="btn btn-primary" id="ask-sommelier">Ask Sommelier</button>
    </div>

    <div id="sommelier-results"></div>

    <hr style="margin: 2rem 0; border-color: var(--border); opacity: 0.3;">

    <!-- Manual pairing section -->
    <div class="pairing-form">
      <h3 style="margin-bottom: 1rem;">Or select manually</h3>
      <h4 style="font-size: 0.8rem; color: var(--text-muted); margin-bottom: 0.5rem;">PROTEIN</h4>
      <div class="signal-grid">
        <button class="signal-btn" data-signal="chicken">Chicken</button>
        <button class="signal-btn" data-signal="pork">Pork</button>
        <button class="signal-btn" data-signal="beef">Beef</button>
        <button class="signal-btn" data-signal="lamb">Lamb</button>
        <button class="signal-btn" data-signal="fish">Fish</button>
        <button class="signal-btn" data-signal="cheese">Cheese</button>
      </div>
      <h4 style="font-size: 0.8rem; color: var(--text-muted); margin: 1rem 0 0.5rem;">FLAVOURS</h4>
      <div class="signal-grid">
        <button class="signal-btn" data-signal="garlic_onion">Garlic/Onion</button>
        <button class="signal-btn" data-signal="herbal">Herbal</button>
        <button class="signal-btn" data-signal="roasted">Roasted</button>
        <button class="signal-btn" data-signal="acid">Acidic/Citrus</button>
        <button class="signal-btn" data-signal="sweet">Sweet</button>
        <button class="signal-btn" data-signal="umami">Umami</button>
        <button class="signal-btn" data-signal="creamy">Creamy</button>
      </div>
      <button class="btn btn-primary" style="margin-top: 1.5rem;" id="get-pairing">Find Pairing</button>
      <button class="btn btn-secondary" style="margin-top: 1.5rem;" id="clear-signals">Clear</button>
    </div>

    <h3 style="margin: 1.5rem 0 1rem;">Suggestions</h3>
    <div class="pairing-results" id="pairing-results">
      <p style="color: var(--text-muted);">Select dish characteristics above</p>
    </div>
  </div>

  <!-- Wine Detail Modal -->
  <div class="modal-overlay" id="modal-overlay">
    <div class="modal" id="wine-modal">
      <h2 id="modal-wine-name">Wine Name</h2>
      <div class="modal-subtitle" id="modal-wine-style">Style - Vintage</div>
      <div class="modal-field">
        <label>Location</label>
        <span id="modal-location">-</span>
      </div>
      <div class="modal-field">
        <label>Rating</label>
        <span id="modal-rating">-</span>
      </div>
      <div class="modal-field">
        <label>Price</label>
        <span id="modal-price">-</span>
      </div>
      <div class="modal-field" id="modal-reduce-field" style="display: none;">
        <label>Reduce Reason</label>
        <span id="modal-reduce-reason">-</span>
      </div>
      <div class="modal-actions">
        <button class="btn btn-danger" id="btn-drink">Drink This</button>
        <button class="btn btn-secondary" id="btn-close">Close</button>
      </div>
    </div>
  </div>

  <!-- Toast -->
  <div class="toast" id="toast"></div>

  <!-- Scripts -->
  <script type="module" src="/js/app.js"></script>
</body>
</html>
